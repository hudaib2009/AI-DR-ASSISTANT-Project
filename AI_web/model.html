<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Doctor assistant</title>
    <link rel="icon" type="image/x-icon" href="icon.ico">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script>
        function addClass(el, className) {
            if (el && !el.classList.contains(className)) {
                el.classList.add(className);
            }
        }

        function removeClass(el, className) {
            if (el && el.classList.contains(className)) {
                el.classList.remove(className);
            }
        }

        const translations = {
            "en": {
                "app_title": "AI Lung cancer diagnosis",
                "change_lang": "Change Language",
                "select_xray": "Select X-Ray Image",
                "upload_xray": "Upload X-Ray",
                "select_ct": "Select CT Scan Image",
                "upload_ct": "Upload CT Scan",
                "result": "Result",
                "true": "Positive",
                "false": "Negative",
                "about": "About",
                "about_title": "About the Tool",
                "about_content": "This tool is designed to assist in medical diagnosis. It provides functionalities for analyzing X-ray and CT scan images, to find traces of cancerous cysts in the chest possibly related to lung cancer.  Please use it responsibly.",
                "general_idea": "How it Works",
                "idea_title": "General Idea",
                "idea_content": "The tool uses image processing techniques to analyze medical images and provide potential diagnostic insights. The results are for informational purposes only and should not replace a professional medical opinion.",
                "cancer_signs": "Cancer Symptoms",
                "cancer_title": "Cancer Symptoms",
                "cancer_content": "Common symptoms of cancer include: fatigue, unexplained weight loss, changes in bowel habits, persistent cough, and unusual bleeding or discharge. Please consult a doctor if you notice any of these.",
                "contact": "Contact",
                "contact_title": "Contact Information",
                "contact_content": "For inquiries or feedback, please contact us at: support@example.com",
                "available_langs": ["English", "Arabic", "French", "Spanish"],
                "close": "Close",
                "home": "Home"
            },
            "ar": {
                "app_title": "ÿ£ÿØÿßÿ© ÿßŸÑÿ™ÿ¥ÿÆŸäÿµ ÿßŸÑÿ∑ÿ®Ÿä",
                "change_lang": "ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÑÿ∫ÿ©",
                "select_xray": "ÿßÿÆÿ™ÿ± ÿµŸàÿ±ÿ© ÿßŸÑÿ£ÿ¥ÿπÿ© ÿßŸÑÿ≥ŸäŸÜŸäÿ©",
                "upload_xray": "ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ£ÿ¥ÿπÿ© ÿßŸÑÿ≥ŸäŸÜŸäÿ©",
                "select_ct": "ÿßÿÆÿ™ÿ± ÿµŸàÿ±ÿ© ÿßŸÑŸÅÿ≠ÿµ ÿßŸÑŸÖŸÇÿ∑ÿπŸä",
                "upload_ct": "ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÅÿ≠ÿµ ÿßŸÑŸÖŸÇÿ∑ÿπŸä",
                "result": "ÿßŸÑŸÜÿ™Ÿäÿ¨ÿ©",
                "true": "ÿ•Ÿäÿ¨ÿßÿ®Ÿä",
                "false": "ÿ≥ŸÑÿ®Ÿä",
                "about": "ÿπŸÜ",
                "about_title": "ÿπŸÜ ÿßŸÑÿ£ÿØÿßÿ©",
                "about_content": "ÿ™ŸÖ ÿ™ÿµŸÖŸäŸÖ Ÿáÿ∞Ÿá ÿßŸÑÿ£ÿØÿßÿ© ŸÑŸÑŸÖÿ≥ÿßÿπÿØÿ© ŸÅŸä ÿßŸÑÿ™ÿ¥ÿÆŸäÿµ ÿßŸÑÿ∑ÿ®Ÿä. ŸäŸàŸÅÿ± Ÿàÿ∏ÿßÿ¶ŸÅ ŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿµŸàÿ± ÿßŸÑÿ£ÿ¥ÿπÿ© ÿßŸÑÿ≥ŸäŸÜŸäÿ© ŸàÿßŸÑŸÅÿ≠Ÿàÿµÿßÿ™ ÿßŸÑŸÖŸÇÿ∑ÿπŸäÿ©. Ÿäÿ±ÿ¨Ÿâ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖŸá ÿ®ŸÖÿ≥ÿ§ŸàŸÑŸäÿ©.",
                "general_idea": "ŸÉŸäŸÅ ÿ™ÿπŸÖŸÑ",
                "idea_title": "ÿßŸÑŸÅŸÉÿ±ÿ© ÿßŸÑÿπÿßŸÖÿ©",
                "idea_content": "ÿ™ÿ≥ÿ™ÿÆÿØŸÖ ÿßŸÑÿ£ÿØÿßÿ© ÿ™ŸÇŸÜŸäÿßÿ™ ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿµŸàÿ± ŸÑÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿµŸàÿ± ÿßŸÑÿ∑ÿ®Ÿäÿ© Ÿàÿ™ŸÇÿØŸäŸÖ ÿ±ÿ§Ÿâ ÿ™ÿ¥ÿÆŸäÿµŸäÿ© ŸÖÿ≠ÿ™ŸÖŸÑÿ©. ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨ ŸáŸä ŸÑÿ£ÿ∫ÿ±ÿßÿ∂ ÿ•ÿπŸÑÿßŸÖŸäÿ© ŸÅŸÇÿ∑ ŸàŸäÿ¨ÿ® ÿ£ŸÑÿß ÿ™ÿ≠ŸÑ ŸÖÿ≠ŸÑ ÿßŸÑÿ±ÿ£Ÿä ÿßŸÑÿ∑ÿ®Ÿä ÿßŸÑŸÖÿ™ÿÆÿµÿµ.",
                "cancer_signs": "ÿ£ÿπÿ±ÿßÿ∂ ÿßŸÑÿ≥ÿ±ÿ∑ÿßŸÜ",
                "cancer_title": "ÿ£ÿπÿ±ÿßÿ∂ ÿßŸÑÿ≥ÿ±ÿ∑ÿßŸÜ",
                "cancer_content": "ÿ™ÿ¥ŸÖŸÑ ÿßŸÑÿ£ÿπÿ±ÿßÿ∂ ÿßŸÑÿ¥ÿßÿ¶ÿπÿ© ŸÑŸÑÿ≥ÿ±ÿ∑ÿßŸÜ: ÿßŸÑÿ™ÿπÿ®ÿå ŸàŸÅŸÇÿØÿßŸÜ ÿßŸÑŸàÿ≤ŸÜ ÿ∫Ÿäÿ± ÿßŸÑŸÖÿ®ÿ±ÿ±ÿå ŸàÿßŸÑÿ™ÿ∫Ÿäÿ±ÿßÿ™ ŸÅŸä ÿπÿßÿØÿßÿ™ ÿßŸÑÿ£ŸÖÿπÿßÿ°ÿå ŸàÿßŸÑÿ≥ÿπÿßŸÑ ÿßŸÑŸÖÿ≥ÿ™ŸÖÿ±ÿå ŸàÿßŸÑŸÜÿ≤ŸäŸÅ ÿ£Ÿà ÿßŸÑÿ•ŸÅÿ±ÿßÿ≤ÿßÿ™ ÿ∫Ÿäÿ± ÿßŸÑÿπÿßÿØŸäÿ©. Ÿäÿ±ÿ¨Ÿâ ÿßÿ≥ÿ™ÿ¥ÿßÿ±ÿ© ÿßŸÑÿ∑ÿ®Ÿäÿ® ÿ•ÿ∞ÿß ŸÑÿßÿ≠ÿ∏ÿ™ ÿ£ŸäŸãÿß ŸÖŸÜ Ÿáÿ∞Ÿá ÿßŸÑÿ£ÿπÿ±ÿßÿ∂.",
                "contact": "ÿßÿ™ÿµŸÑ",
                "contact_title": "ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿßÿ™ÿµÿßŸÑ",
                "contact_content": "ŸÑŸÑÿßÿ≥ÿ™ŸÅÿ≥ÿßÿ±ÿßÿ™ ÿ£Ÿà ÿßŸÑŸÖŸÑÿßÿ≠ÿ∏ÿßÿ™ÿå Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÜÿß ÿπŸÑŸâ: support@example.com",
                "available_langs": ["ÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ©", "ÿßŸÑÿπÿ±ÿ®Ÿäÿ©", "ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿäÿ©", "ÿßŸÑÿ•ÿ≥ÿ®ÿßŸÜŸäÿ©"],
                "close": "ÿ•ÿ∫ŸÑÿßŸÇ",
                "home": "ÿßŸÑÿµŸÅÿ≠ÿ© ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©"
            },
            "fr": {
                "app_title": "Outil de diagnostic m√©dical",
                "change_lang": "Changer de langue",
                "select_xray": "S√©lectionner l'image de radiographie",
                "upload_xray": "T√©l√©charger la radiographie",
                "select_ct": "S√©lectionner l'image de scanner",
                "upload_ct": "T√©l√©charger le scanner",
                "result": "R√©sultat",
                "true": "Positif",
                "false": "N√©gatif",
                "about": "√Ä propos",
                "about_title": "√Ä propos de l'outil",
                "about_content": "Cet outil est con√ßu pour aider au diagnostic m√©dical. Il fournit des fonctionnalit√©s pour l'analyse des images de radiographie et de scanner. Veuillez l'utiliser de mani√®re responsable.",
                "general_idea": "Comment √ßa marche",
                "idea_title": "Id√©e g√©n√©rale",
                "idea_content": "L'outil utilise des techniques de traitement d'image pour analyser les images m√©dicales et fournir des informations diagnostiques potentielles. Les r√©sultats sont uniquement √† titre informatif et ne doivent pas remplacer un avis m√©dical professionnel.",
                "cancer_signs": "Sympt√¥mes du cancer",
                "cancer_title": "Sympt√¥mes du cancer",
                "cancer_content": "Les sympt√¥mes courants du cancer comprennent¬†: fatigue, perte de poids inexpliqu√©e, changements dans les habitudes intestinales, toux persistante et saignements ou √©coulements inhabituels. Veuillez consulter un m√©decin si vous remarquez l'un de ces sympt√¥mes.",
                "contact": "Contact",
                "contact_title": "Coordonn√©es",
                "contact_content": "Pour toute question ou commentaire, veuillez nous contacter √†¬†: support@example.com",
                "available_langs": ["English", "Arabic", "French", "Spanish"],
                "close": "Fermer",
                "home": "Accueil"
            },
            "es": {
                "app_title": "Herramienta de diagn√≥stico m√©dico",
                "change_lang": "Cambiar idioma",
                "select_xray": "Seleccionar imagen de rayos X",
                "upload_xray": "Subir rayos X",
                "select_ct": "Seleccionar imagen de tomograf√≠a computarizada",
                "upload_ct": "Subir tomograf√≠a computarizada",
                "result": "Resultado",
                "true": "Positivo",
                "false": "Negativo",
                "about": "Acerca de",
                "about_title": "Acerca de la herramienta",
                "about_content": "Esta herramienta est√° dise√±ada para ayudar en el diagn√≥stico m√©dico. Proporciona funcionalidades para analizar im√°genes de rayos X y tomograf√≠as computarizadas. √ösela de manera responsable.",
                "general_idea": "C√≥mo funciona",
                "idea_title": "Idea general",
                "idea_content": "La herramienta utiliza t√©cnicas de procesamiento de im√°genes para analizar im√°genes m√©dicas y proporcionar posibles conocimientos diagn√≥sticos. Los resultados son solo para fines informativos y no deben reemplazar una opini√≥n m√©dica profesional.",
                "cancer_signs": "S√≠ntomas del c√°ncer",
                "cancer_title": "S√≠ntomas del c√°ncer",
                "cancer_content": "Los s√≠ntomas comunes del c√°ncer incluyen: fatiga, p√©rdida de peso inexplicable, cambios en los h√°bitos intestinales, tos persistente y sangrado o secreci√≥n inusual. Consulte a un m√©dico si observa alguno de estos s√≠ntomas.",
                "contact": "Contacto",
                "contact_title": "Informaci√≥n de contacto",
                "contact_content": "Para consultas o comentarios, cont√°ctenos en: support@example.com",
                "available_langs": ["English", "Arabic", "French", "Spanish"],
                "close": "Cerrar",
                "home": "Inicio"
            },
        };

        let currentLang = "en";
        let translatableWidgets = [];

        function updateTranslations() {
            for (const [widgetId, key] of translatableWidgets) {
                const widget = document.getElementById(widgetId);

                if (widget) {
                    if (widget.tagName === 'BUTTON' || widget.tagName === 'H1' || widget.tagName === 'H2' || widget.tagName === 'H3' || widget.tagName === 'LABEL') {
                        widget.textContent = translations[currentLang][key];
                    }
                }
            }
        }

        function changeLanguage(lang) {
            currentLang = lang;
            updateTranslations();
        }

        function uploadXray() {
             const fileInput = document.getElementById('xray-file');
            const file = fileInput.files[0];

            if (file) {
                displayImage(file, 'xray-preview');
            } else {
                alert('Please select an X-ray image.');
            }

            const random = Math.floor(Math.random() * 2) + 1;
                const message = random === 1 ? translations[currentLang]["true"] : translations[currentLang]["false"];
                displayResult(`${translations[currentLang]["result"]}: ${message}`);
        }

        function uploadCTScan() {
            const fileInput = document.getElementById('ct-file');
            const file = fileInput.files[0];

            if (file) {
                displayImage(file, 'ct-preview');
            } else {
                alert('Please select a CT scan image.');
            }

            const random = Math.floor(Math.random() * 2) + 1;
                const message = random === 1 ? translations[currentLang]["true"] : translations[currentLang]["false"];
                displayResult(`${translations[currentLang]["result"]}: ${message}`);
        }

        function displayResult(message) {
            const resultArea = document.getElementById('result-area');
            resultArea.textContent = message;
        }

        function displayImage(file, previewId) {
            const reader = new FileReader();

            reader.onload = function(e) {
                let previewArea = document.getElementById(previewId);

                if (!previewArea) {
                    previewArea = document.createElement('div');
                    previewArea.classList.add('image-preview');
                    previewArea.id = previewId; 
                    const container = document.querySelector('.container');
                    container.appendChild(previewArea);
                }

                previewArea.innerHTML = '';

                const img = document.createElement('img');
                img.src = e.target.result;
                previewArea.appendChild(img);
            }

            reader.readAsDataURL(file);
        }



        document.addEventListener('DOMContentLoaded', () => {
            translatableWidgets = [
                ["app-title", "app_title"],
                ["change-lang-btn", "change_lang"],
                ["xray-upload-label", "upload_xray"],
                ["ct-upload-label", "upload_ct"],
                ["home-btn", "home"]
            ];

            updateTranslations();

            document.getElementById('change-lang-btn').addEventListener('click', () => {
              const languageWindow = document.getElementById('language-window');
              const overlay = document.querySelector('.overlay'); 
              addClass(languageWindow, 'show');
              addClass(overlay, 'show');  
            });

            document.addEventListener('click', (event) => {
              const languageWindow = document.getElementById('language-window');
              const overlay = document.querySelector('.overlay');
              if (!languageWindow.contains(event.target) && event.target.id !== 'change-lang-btn' && languageWindow.classList.contains('show')) {
                  removeClass(languageWindow, 'show');
                  removeClass(overlay, 'show');
              }
            });

            document.getElementById('xray-file').addEventListener('change', uploadXray);
            document.getElementById('ct-file').addEventListener('change', uploadCTScan);
        });
    </script>
</head>
<body class="dark-mode">
    
    <div class="container">
        <h1>AI Lung Cancer Diagnosis</h1>
        
        <div class="button-group">
            <button class="change-lang">Change Language</button>
            <button class="toggle-button" onclick="toggleMode()" id="modeIcon">üåô</button>
        </div>

        <div class="upload-area">
            <label for="xray-upload">
                <i class="fas fa-upload"></i> Select X-Ray Image
            </label>
            <input type="file" id="xray-upload" accept="image/*" onchange="handleImageUpload(this, 'xray-preview')">
        </div>

        <div class="image-preview">
            <img id="xray-preview" src="" alt="X-Ray Preview" style="display: none;">
        </div>

        <div class="upload-area">
            <label for="ct-upload">
                <i class="fas fa-upload"></i> Select CT Scan Image
            </label>
            <input type="file" id="ct-upload" accept="image/*" onchange="handleImageUpload(this, 'ct-preview')">
        </div>

        <div class="image-preview">
            <img id="ct-preview" src="" alt="CT Scan Preview" style="display: none;">
        </div>

        <div class="result-area">
            Result will appear here
        </div>
    </div>

    <div class="language-window">
        <h2>Select Language</h2>
        <div class="language-options">
            <!-- Language options will be populated by JavaScript -->
        </div>
        <button class="close-button">Close</button>
    </div>

    <div class="overlay"></div>

    <footer>
        <h3>&copy; 2025 JMI team. All Rights Reserved.</h3>
    </footer>

    <script src="script.js"></script>
    <script>
    function toggleMode() {
      const body = document.body;
      const icon = document.getElementById('modeIcon');
      if(body.classList.contains('dark-mode')) {
        body.classList.remove('dark-mode');
        body.classList.add('light-mode');
        icon.textContent = '‚òÄÔ∏è';
      } else {
        body.classList.remove('light-mode');
        body.classList.add('dark-mode');
        icon.textContent = 'üåô';
      }
      localStorage.setItem('mode', body.classList.contains('dark-mode') ? 'dark' : 'light');
    }
    window.onload = function() {
      const savedMode = localStorage.getItem('mode');
      const body = document.body;
      const icon = document.getElementById('modeIcon');
      
      // Set dark mode as default if no preference is saved
      if(savedMode === null || savedMode === 'dark') {
        body.classList.remove('light-mode');
        body.classList.add('dark-mode');
        icon.textContent = 'üåô';
      } else if(savedMode === 'light') {
        body.classList.remove('dark-mode');
        body.classList.add('light-mode');
        icon.textContent = '‚òÄÔ∏è';
      }
    }
    </script>
</body>
</html>